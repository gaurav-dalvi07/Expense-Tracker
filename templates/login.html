<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Login | Expense Tracker</title>

<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
<link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css" rel="stylesheet">
<style>
body{
    background:url("{{ url_for('static', filename='bg.jpg') }}") no-repeat center center fixed;
    background-size:cover;
    height:100vh;
    display:flex;
    justify-content:center;
    align-items:center;
}

.overlay{
    position:absolute;
    inset:0;
    background:rgba(0,0,0,0.65);
}

.login-card{
    position:relative;
    z-index:2;
    width:100%;
    max-width:380px;
    backdrop-filter:blur(15px);
    background:rgba(255,255,255,0.12);
    color:white;
    padding:40px 30px;
    border-radius:25px;
    text-align:center;
}

h2{
    color:#00ffae;
    font-weight:bold;
}

.input-group{
    background:rgba(255,255,255,0.15);
    border-radius:15px;
    overflow:hidden;
    margin-bottom:18px;
}

.input-group-text{
    background:transparent;
    border:none;
    color:#00ffae;
    font-size:18px;
}

.form-control{
    background:transparent;
    border:none;
    color:white;
}

.form-control:focus{
    box-shadow:none;
    background:rgba(255,255,255,0.15);
}

.eye-btn{
    background:none;
    border:none;
    color:#00ffae;
}

.btn-custom{
    width:100%;
    margin-top:10px;
    border:none;
    padding:12px;
    border-radius:30px;
    background:linear-gradient(45deg,#00ffae,#00b3ff);
    font-weight:bold;
    transition:0.3s;
}

.btn-custom:hover{transform:scale(1.05);}

a{
    color:#00ffae;
    text-decoration:none;
}
a:hover{text-decoration:underline;}

/* âœ… ALERT DESIGN */
.alert{
    position:relative;
    animation: slideIn .6s;
}
@keyframes slideIn{
    from{transform:translateY(-10px);opacity:0;}
    to{transform:none;opacity:1;}
}
</style>
</head>
<body>

<div class="overlay"></div>

<div class="login-card">

<h2>ðŸ”’ Expense Tracker Login</h2>

<!-- âœ… FLASH MESSAGES -->
{% with messages = get_flashed_messages(with_categories=true) %}
{% for cat,msg in messages %}
<div class="alert alert-{{ cat }} mt-2">{{ msg }}</div>
{% endfor %}
{% endwith %}

<form method="POST">

<div class="input-group">
    <span class="input-group-text"><i class="fa-solid fa-user"></i></span>
    <input type="text" name="username" class="form-control" placeholder="Username" required>
</div>

<div class="input-group">
    <span class="input-group-text"><i class="fa-solid fa-lock"></i></span>
    <input type="password" id="loginPass" name="password" class="form-control" placeholder="Password" required>
    <button type="button" class="eye-btn px-2" onclick="togglePassword('loginPass',this)">
        <i class="fa-solid fa-eye"></i>
    </button>
</div>

<button type="submit" class="btn-custom">Login</button>

</form>

<p class="mt-3">Don't have account?  
<a href="{{ url_for('signup') }}">Sign Up</a></p>

</div>

<script>
// âœ… PASSWORD TOGGLE
function togglePassword(id, btn){
    let pass = document.getElementById(id);
    let icon = btn.querySelector("i");

    if(pass.type=="password"){
        pass.type="text";
        icon.classList.replace("fa-eye","fa-eye-slash")
    }
    else{
        pass.type="password";
        icon.classList.replace("fa-eye-slash","fa-eye")
    }
}

// âœ… AUTO HIDE ALERTS
setTimeout(()=>{
    document.querySelectorAll(".alert").forEach(a=>{
        a.style.opacity=0;
        setTimeout(()=>a.remove(),600)
    })
},3000);
</script>

</body>
</html>

